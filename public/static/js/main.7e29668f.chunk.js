(this["webpackJsonpreact-rails-api-project-template-client"]=this["webpackJsonpreact-rails-api-project-template-client"]||[]).push([[0],{17:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n(12),i=n.n(o),a=(n(17),n(3)),r=n(2),s=n(0);var j=function(e){var t=e.onLogin,n=Object(c.useState)(""),o=Object(a.a)(n,2),i=o[0],j=o[1],u=Object(c.useState)(""),l=Object(a.a)(u,2),b=l[0],d=l[1],O=Object(c.useState)([]),h=Object(a.a)(O,2),m=h[0],p=h[1],f=Object(c.useState)(!1),x=Object(a.a)(f,2),g=x[0],v=x[1],C=Object(r.f)();return Object(s.jsx)("div",{className:"container",children:Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),v(!0),fetch("https://salty-fortress-94451.herokuapp.com/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,password:b})}).then((function(e){v(!1),e.ok?e.json().then((function(e){return t(e)})).then(C("/books")):e.json().then((function(e){return p(e.errors)}))}))},children:[Object(s.jsx)("h3",{children:"LogIn"}),Object(s.jsx)("input",{type:"text",id:"email",autoComplete:"",value:i,onChange:function(e){return j(e.target.value)},placeholder:"email here",className:"input-text"}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{type:"password",id:"password",autoComplete:"current-password",value:b,onChange:function(e){return d(e.target.value)},placeholder:"password here",className:"input-text"}),Object(s.jsx)("br",{}),Object(s.jsx)("button",{variant:"fill",color:"primary",type:"submit",children:g?"Loading...":"Login"}),m.map((function(e){return Object(s.jsx)("p",{children:e},e)}))]})})};var u=function(e){var t=e.onLogin,n=Object(c.useState)(""),o=Object(a.a)(n,2),i=o[0],r=o[1],j=Object(c.useState)(""),u=Object(a.a)(j,2),l=u[0],b=u[1],d=Object(c.useState)(""),O=Object(a.a)(d,2),h=O[0],m=O[1],p=Object(c.useState)(""),f=Object(a.a)(p,2),x=f[0],g=f[1],v=Object(c.useState)(""),C=Object(a.a)(v,2),k=C[0],I=C[1],S=Object(c.useState)([]),A=Object(a.a)(S,2),y=A[0],N=A[1],w=Object(c.useState)(!1),T=Object(a.a)(w,2),U=T[0],D=T[1];return Object(s.jsx)("div",{children:Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),N([]),D(!0),fetch("https://salty-fortress-94451.herokuapp.com/api/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:h,password:x,first_name:i,last_name:l,password_confirmation:k})}).then((function(e){D(!1),e.ok?e.json().then((function(e){return t(e)})):e.json().then((function(e){return N(e.errors)}))}))},children:[Object(s.jsx)("h1",{children:"Sign Up"}),Object(s.jsx)("label",{htmlFor:"firstname",children:"First Name"}),Object(s.jsx)("input",{type:"text",id:"firstname",autoComplete:"off",value:i,onChange:function(e){return r(e.target.value)}}),Object(s.jsx)("label",{htmlFor:"lastname",children:"Last Name"}),Object(s.jsx)("input",{type:"text",id:"lastname",autoComplete:"off",value:l,onChange:function(e){return b(e.target.value)}}),Object(s.jsx)("label",{htmlFor:"email",children:"Email"}),Object(s.jsx)("input",{type:"text",id:"email",autoComplete:"off",value:h,onChange:function(e){return m(e.target.value)}}),Object(s.jsx)("label",{htmlFor:"password",children:"Password"}),Object(s.jsx)("input",{type:"password",id:"password",value:x,onChange:function(e){return g(e.target.value)},autoComplete:"current-password"}),Object(s.jsx)("label",{htmlFor:"password",children:"Password Confirmation"}),Object(s.jsx)("input",{type:"password",id:"password_confirmation",value:k,onChange:function(e){return I(e.target.value)},autoComplete:"current-password"}),Object(s.jsx)("button",{type:"submit",children:U?"Loading...":"Sign Up"}),y.map((function(e){return Object(s.jsx)("p",{children:e},e)}))]})})};var l=function(e){var t=e.onLogin,n=Object(c.useState)(!0),o=Object(a.a)(n,2),i=o[0],r=o[1];return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Book Club"}),i?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(j,{onLogin:t}),Object(s.jsxs)("p",{children:["Don't have an account? \xa0",Object(s.jsx)("button",{onClick:function(){return r(!1)},children:"Sign Up"})]})]}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(u,{onLogin:t}),Object(s.jsxs)("p",{children:["Already have an account?",Object(s.jsx)("button",{onClick:function(){return r(!0)},children:"Log In"})]})]})]})};var b=function(){return Object(s.jsx)("div",{id:"book-header",children:Object(s.jsx)("img",{src:"data:image/png;base64,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",alt:"book header"})})},d=n(5);var O=function(e){var t=e.setUser,n=Object(r.f)();return Object(s.jsx)("header",{children:Object(s.jsx)("div",{children:Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{children:[Object(s.jsx)("button",{onClick:function(){fetch("https://salty-fortress-94451.herokuapp.com/api/logout",{method:"DELETE"}).then((function(e){e.ok&&(t(null),n("/books"))}))},children:"Logout"}),Object(s.jsx)(d.b,{to:"/books",children:Object(s.jsx)("button",{children:"Home"})})]})})})})},h=n(8),m=n(6);var p=function(e){var t=e.onAddBook,n=Object(c.useState)({img_url:"",title:""}),o=Object(a.a)(n,2),i=o[0],r=o[1];function j(e){r(Object(m.a)(Object(m.a)({},i),{},Object(h.a)({},e.target.name,e.target.value)))}return Object(s.jsx)("div",{className:"container",children:Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=Object(m.a)({},i);fetch("https://salty-fortress-94451.herokuapp.com/api/books",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){r({img_url:"",title:""}),t(e)}))},className:"add-book-form",children:[Object(s.jsx)("h3",{children:"Add New Book"}),Object(s.jsx)("input",{type:"text",name:"img_url",onChange:j,value:i.img_url,placeholder:"Add image here...",className:"input-text"}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{type:"text",name:"title",onChange:j,value:i.title,placeholder:"Enter book title here...",className:"input-text"}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{type:"submit",name:"submit",value:"Add New Book",className:"submit"})]})})},f=n(10);var x=function(e){var t=e.onAddComment,n=e.user,o=Object(r.g)().id,i=Object(c.useState)({comment:"",user_id:n.id,book_id:o}),j=Object(a.a)(i,2),u=j[0],l=j[1];return Object(s.jsx)("div",{className:"container",children:Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c=Object(m.a)({},u);fetch("https://salty-fortress-94451.herokuapp.com/api/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){console.log(e),l({comment:"",user_id:n.id,book_id:o}),t(e)}))},className:"add-book-form",children:[Object(s.jsx)("h3",{children:"Add New Comment"}),Object(s.jsx)("input",{type:"text",name:"comment",onChange:function(e){l(Object(m.a)(Object(m.a)({},u),{},Object(h.a)({},e.target.name,e.target.value)))},value:u.comment,placeholder:"Add Comment here...",className:"input-text"}),Object(s.jsx)("input",{type:"submit",name:"submit",value:"Add New Comment",className:"submit"})]})})};var g=function(e){var t,n=e.user,o=Object(r.g)().id,i=Object(c.useState)([]),j=Object(a.a)(i,2),u=j[0],l=j[1];return Object(c.useEffect)((function(){fetch("https://salty-fortress-94451.herokuapp.com/api/books/".concat(o)).then((function(e){return e.json()})).then((function(e){l((function(){return e}))}))}),[]),Object(s.jsx)("div",{children:u?Object(s.jsxs)("div",{children:[Object(s.jsx)("img",{src:u.img_url,alt:u.title}),Object(s.jsx)("h2",{children:"Details:"}),Object(s.jsxs)("ul",{children:[Object(s.jsxs)("li",{children:["Author: ",u.author]}),Object(s.jsxs)("li",{children:["Description: ",u.description]}),Object(s.jsxs)("li",{children:["Page Count: ",u.pages]}),Object(s.jsxs)("li",{children:["Genre: ",u.genre]})]}),Object(s.jsx)("h2",{children:"Comments:"}),null===(t=u.comments)||void 0===t?void 0:t.map((function(e){return Object(s.jsxs)("div",{style:{border:"1px solid black"},children:[Object(s.jsx)("br",{}),"Comment: ",e.comment," \xa0",Object(s.jsx)("button",{onClick:function(){return t=e.id,void fetch("https://salty-fortress-94451.herokuapp.com/api/comments/".concat(t),{method:"DELETE"}).then((function(e){if(e.ok){console.log(u);var n=Object(m.a)(Object(m.a)({},u),{},{comments:u.comments.filter((function(e){return e.id!==t}))});l(n)}}));var t},children:"delete"})]},e.id)})),Object(s.jsx)(x,{onAddComment:function(e){l(Object(m.a)(Object(m.a)({},u),{},{comments:[].concat(Object(f.a)(u.comments),[e])}))},user:n})]}):null})};var v=function(e){var t=e.book,n=e.onDeleteBook,c=e.onUpdateBook,o=t.id,i=t.img_url,a=t.title,r=t.likes;return Object(s.jsxs)("div",{className:"card",children:[Object(s.jsx)(d.b,{to:"/books/".concat(t.id),children:Object(s.jsx)("img",{src:i,alt:a,className:"book-avatar"})}),Object(s.jsxs)("p",{children:[r," currently reading",Object(s.jsx)("button",{className:"like-btn",onClick:function(){var e={likes:t.likes+1};fetch("https://salty-fortress-94451.herokuapp.com/api/books/".concat(o),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return c(e)}))},children:"Reading"})," "]}),Object(s.jsx)("button",{className:"del-btn",onClick:function(){fetch("https://salty-fortress-94451.herokuapp.com/api/books/".concat(o),{method:"DELETE"}).then((function(e){e.ok&&n(t)}))},children:"Remove from Reading List"})]})};var C=function(){var e=Object(c.useState)(!1),t=Object(a.a)(e,2),n=t[0],o=t[1],i=Object(c.useState)([]),r=Object(a.a)(i,2),j=r[0],u=r[1];Object(c.useEffect)((function(){fetch("https://salty-fortress-94451.herokuapp.com/api/books/").then((function(e){return e.json()})).then(u)}),[]);var l=j.map((function(e){return Object(s.jsx)(v,{book:e,onDeleteBook:b,onUpdateBook:d},e.id)}));function b(e){var t=j.filter((function(t){return t.id!==e.id}));u(t)}function d(e){var t=j.map((function(t){return t.id===e.id?e:t}));u(t)}return Object(s.jsxs)("div",{children:[n?Object(s.jsx)(p,{onAddBook:function(e){u([].concat(Object(f.a)(j),[e]))}}):null,Object(s.jsx)("div",{className:"buttonContainer",children:Object(s.jsx)("button",{onClick:function(){o((function(e){return!e}))},children:"Add a Book"})}),Object(s.jsx)("div",{id:"book-collection",children:l})]})};var k=function(){var e=Object(c.useState)(null),t=Object(a.a)(e,2),n=t[0],o=t[1];return Object(c.useEffect)((function(){fetch("https://salty-fortress-94451.herokuapp.com/api/me").then((function(e){e.ok&&(e.json().then((function(e){return o(e)})),console.log(n))}))}),[]),n?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(O,{user:n,setUser:o}),Object(s.jsx)(b,{}),Object(s.jsx)("main",{children:Object(s.jsxs)(r.c,{children:[Object(s.jsx)(r.a,{path:"/books",element:Object(s.jsx)(C,{user:n})}),Object(s.jsx)(r.a,{path:"/books/:id",element:Object(s.jsx)(g,{user:n})}),Object(s.jsx)(r.a,{path:"/login",element:Object(s.jsx)(l,{user:n})}),Object(s.jsx)(r.a,{path:"/new",element:Object(s.jsx)(p,{user:n})})]})})]}):Object(s.jsx)(l,{onLogin:o})};i.a.render(Object(s.jsx)(d.a,{children:Object(s.jsx)(k,{})}),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.7e29668f.chunk.js.map